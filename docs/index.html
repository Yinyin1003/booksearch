<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>书籍管理系统</title>
    <link rel="stylesheet" href="static/css/style.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>📚 书籍管理系统</h1>
            <div class="controls">
                <button id="saveBtn" class="btn btn-primary">保存所有更改</button>
                <button id="previewBtn" class="btn btn-secondary">🎤 语音搜索预览</button>
            </div>
        </div>
        
        <div class="main-content">
            <!-- 左侧：图片编辑区域 -->
            <div class="image-panel">
                <div class="image-container">
                    <img id="bookshelfImage" src="bookshelf.jpg" alt="书架图片">
                    <canvas id="overlayCanvas"></canvas>
                </div>
                <div class="image-controls">
                    <label>书架图片：</label>
                    <input type="file" id="imageUpload" accept="image/*">
                </div>
            </div>

            <!-- 右侧：编辑面板 -->
            <div class="edit-panel">
                <div class="book-list">
                    <h2>书籍列表</h2>
                    <div id="bookList" class="book-items">
                        <!-- 书籍列表将由JS渲染 -->
                    </div>
                </div>

                <div id="bookEditor" class="book-editor" style="display: none;">
                    <h2>编辑书籍</h2>
                    <div class="form-group">
                        <label>书籍关键词：</label>
                        <input type="text" id="bookKey" readonly>
                    </div>
                    <div class="form-group">
                        <label>完整书名：</label>
                        <textarea id="bookName" rows="3"></textarea>
                    </div>

                    <div class="form-group">
                        <label>位置调整（四点模式）：</label>
                        <div class="points-controls">
                            <p class="hint">点击图片上的四个角点来调整位置（左上、右上、右下、左下）</p>
                            <div class="points-list">
                                <div class="point-item">
                                    <label>点1 (左上):</label>
                                    <input type="number" id="point1X" step="0.001" min="0" max="1" placeholder="X">
                                    <input type="number" id="point1Y" step="0.001" min="0" max="1" placeholder="Y">
                                </div>
                                <div class="point-item">
                                    <label>点2 (右上):</label>
                                    <input type="number" id="point2X" step="0.001" min="0" max="1" placeholder="X">
                                    <input type="number" id="point2Y" step="0.001" min="0" max="1" placeholder="Y">
                                </div>
                                <div class="point-item">
                                    <label>点3 (右下):</label>
                                    <input type="number" id="point3X" step="0.001" min="0" max="1" placeholder="X">
                                    <input type="number" id="point3Y" step="0.001" min="0" max="1" placeholder="Y">
                                </div>
                                <div class="point-item">
                                    <label>点4 (左下):</label>
                                    <input type="number" id="point4X" step="0.001" min="0" max="1" placeholder="X">
                                    <input type="number" id="point4Y" step="0.001" min="0" max="1" placeholder="Y">
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>显示设置：</label>
                        <div class="display-controls">
                            <div>
                                <label>书名框宽度:</label>
                                <input type="number" id="boxWidth" step="10" min="200" max="1000">
                            </div>
                            <div>
                                <label>书名框高度:</label>
                                <input type="number" id="boxHeight" step="10" min="100" max="300">
                            </div>
                            <div>
                                <label>字体大小:</label>
                                <input type="number" id="fontScale" step="0.1" min="0.5" max="3.0">
                            </div>
                            <div>
                                <label>字体粗细:</label>
                                <input type="number" id="fontThickness" step="1" min="1" max="10">
                            </div>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button id="updateBookBtn" class="btn btn-primary">更新书籍</button>
                        <button id="deleteBookBtn" class="btn btn-danger">删除书籍</button>
                        <button id="cancelEditBtn" class="btn btn-secondary">取消</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 配置 API 基础 URL（需要修改为你的后端地址）
        const API_BASE_URL = window.location.origin.includes('github.io') 
            ? 'https://your-backend-url.railway.app'  // GitHub Pages 使用后端 URL
            : '';  // 本地开发使用相对路径
        
        // 修改所有 fetch 调用使用 API_BASE_URL
        const apiFetch = (url, options = {}) => {
            const fullUrl = url.startsWith('http') ? url : `${API_BASE_URL}${url}`;
            return fetch(fullUrl, options);
        };
    </script>
    <script src="static/js/app.js"></script>
</body>
</html>

